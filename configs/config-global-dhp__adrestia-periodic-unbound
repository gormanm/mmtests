### adrestia-wakeup-periodic is a scheduler wakeup latency
### micro-benchmark. You can configure,
###
###   - the number of threads to wakeup
###   - the period between wakeups (arrival time)
###   - the time threads spin once woken up (service time)
###
### Because scheduler wakeup latency is influenced by CPU frequency, this
### micro-benchmark may indicate a false performance regression if used to
### compare new and old distribution releases running on modern hardware
### (Intel Skylake or newer) if the old release lacks intel_pstate driver
### or intel_idle driver support, and does not throttle CPU frequency
### or change processor C-states on idle systems.

# MM Test Parameters
export MMTESTS="adrestia-wakeup-periodic"
export RUN_WARMUP=


# Machine configuration

# Test disk to setup (optional)
#export TESTDISK_RAID_DEVICES=
#export TESTDISK_RAID_MD_DEVICE=/dev/md0
#export TESTDISK_RAID_OFFSET=63
#export TESTDISK_RAID_SIZE=250019532
#export TESTDISK_RAID_TYPE=raid0
#export TESTDISK_PARTITION=/dev/sda6
#export TESTDISK_FILESYSTEM=ext3
#export TESTDISK_MKFS_PARAM="-f -d agcount=8"
#export TESTDISK_MOUNT_ARGS=""

# List of monitors
export RUN_MONITOR=yes
export MONITORS_ALWAYS=
export MONITORS_PLAIN=
export MONITORS_GZIP="proc-vmstat mpstat perf-time-stat"
export MONITORS_WITH_LATENCY="vmstat"
export MONITOR_PERF_EVENTS=cpu-migrations,context-switches
export MONITOR_UPDATE_FREQUENCY=10

# Adrestia
export ADRESTIA_LOOPS=1000
export ADRESTIA_MIN_ARRIVAL_TIME=32
export ADRESTIA_MAX_ARRIVAL_TIME=$((64*1024))
export ADRESTIA_SERVICE_TIME=25000
export ADRESTIA_ITERATIONS=3
export ADRESTIA_THREADS=$((NUMCPUS*2))
